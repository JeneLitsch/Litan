
typedef foo;

fnx main() voi {
	var str str1;
	var str str2;
	var str str3;
	str1 = "hello ";
	str2 = "world!";
	str3 = ->add(str1, str2);
	-> print(str1);
	-> print(str2);
	-> print(str3);

	var str str4;
	str4 = "Lorem ipsum dolor sit amet";
	-> print(str4);

	-> delete(str1);
	-> delete(str2);
	-> delete(str3);
	-> delete(str4);

	var foo a;
	a = -> makeFoo();
	-> print(a);
}

fnx makeFoo() foo {
	asm {
		"newl 42"
		"return"
	}
}

fnx print(foo obj) voi {
	asm {
		"load 0"
		"print"
		"return"
	}
}

fnx hello() str {
	asm {
		"string::new"
		"string::data 'hello '"
		"return"
	}
}

fnx world() str {
	asm {
		"string::new"
		"string::data 'world'"
		"return"
	}
}