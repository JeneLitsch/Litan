namespace test {
	function combine(a, b, c) {
		var s = abc(a,b,c);
		return s.a + s.b - s.c;
	}

	function abc(a, b, c) {
		var s = std::struct();
		s.a = a;
		s.b = b;
		s.c = c;
		return s;
	}

	function struct_read_write() {
		var cases = [
			[[1,2,3], 0],
			[[-1,2,5], -5],
			[[true, true, true], 1],
		];
		return test_all_cases("Struct: read and write", &combine(_,_,_), cases); 
	}

	function has_a(s) {
		return std::bool(s.a);
	}

	function with_a() {
		var s = std::struct();
		s.a = 1;
		return s;
	}

	function without_a() {
		return std::struct();
	}

	function struct_null() {
		var cases = [
			[[with_a()], true],
			[[without_a()], false],
		];
		return test_all_cases("Struct: null", &has_a(_), cases); 
	}

	function struct() {
		return
			struct_read_write() +
			struct_null();
	}
}