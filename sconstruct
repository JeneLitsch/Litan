flags = [
	"-std=c++2a", "-O3",
	"-Wall", "-Wextra", "-Wconversion", "-Wunreachable-code", "-Wuninitialized", "-pedantic-errors" , "-Wold-style-cast", "-Wno-error=unused-variable"
]

def glob(dirs):
	files = []
	for dir in dirs:
		files.append(Glob(dir + "/*.cxx"))
	return files

env = Environment(
	# CXX = "clang++",
	CXX = "g++",
	CXXFLAGS = flags,
	CPPPATH = ["."],
	CPPDEFINES = [],
	LIBS = [],
	LIBPATH = ".",
	SCONS_CXX_STANDART="c++20",
	CXXCOMSTR = "[Compiling] $TARGET",
	LINKCOMSTR = "[Linking] $TARGET")

ltnc = [
	"ltnc",
	"ltnc/ast",
	"ltnc/lex",
	"ltnc/parse",
	"ltnc/compile",
	"ltnc/type",
]
ltncCli = [
	"ltnc/cli",
]


ltna = [
	"ltna",
	"ltna/linking",
	"ltna/expand",
	"ltna/assemble",
]
ltnaCli = [
	"ltna/cli",
]

ltnvm = [
	"ltnvm",
	"ltnvm/external",
	"ltnvm/memory",
	"ltnvm/memory/objects",
]
ltnvmCli = [
	"ltnvm/cli",
]

ltnCli = [
	"ltn/cli"
]

env.Program('bin/ltnc', glob(ltnc + ltncCli))
env.Program('bin/ltna', glob(ltna + ltnaCli))
env.Program('bin/ltnvm', glob(ltnvm + ltnvmCli))
env.Program('bin/ltn', glob(ltnc + ltna + ltnvm + ltnCli))
