flags = [
	"-std=c++2a", "-O3",
	"-Wall", "-Wextra", "-Wconversion", "-Wunreachable-code", "-Wuninitialized", "-pedantic-errors" , "-Wold-style-cast", "-Wno-error=unused-variable"
]

def glob(dirs):
	files = []
	for dir in dirs:
		files.append(Glob(dir + "/*.cxx"))
	return files

env = Environment(
	CXX = "g++-10",
	CXXFLAGS = flags,
	CPPPATH = ["."],
	CPPDEFINES = [],
	LIBS = [],
	LIBPATH = ".",
	SCONS_CXX_STANDART="c++20",
	CXXCOMSTR = "[Compiling] $TARGET",
	LINKCOMSTR = "[Linking] $TARGET")

ltnc = [
	"ltnc",
	"ltnc/cli",
	"ltnc/ast",
	"ltnc/lex",
	"ltnc/parse",
	"ltnc/compile",
	"ltnc/type",
]

ltna = [
	"ltna",
	"ltna/cli",
	"ltna/linking",
	"ltna/expand",
	"ltna/assemble",
]

ltnvm = [
	"ltnvm",
	"ltnvm/external",
	"ltnvm/memory",
	"ltnvm/memory/objects",
]

env.Program('bin/ltnc', glob(ltnc))
env.Program('bin/ltna', glob(ltna))
env.Program('bin/ltnvm', glob(ltnvm))
